<UserControl x:Class="KitchenEquipmentManagement.Views.SiteEquipmentOverviewView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,20">
            <TextBlock Text="Site Equipment Management" 
                       FontSize="24" 
                       FontWeight="Bold" 
                       VerticalAlignment="Center"
                       Foreground="#2c3e50"/>
            <Button Content="Refresh" 
                    Command="{Binding RefreshCommand}"
                    Style="{StaticResource InfoButtonStyle}"
                    Margin="20,0,0,0"
                    Width="80"/>
        </StackPanel>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="10"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Sites with Equipment Count -->
            <Border Grid.Row="0" 
                    Background="White" 
                    CornerRadius="8" 
                    Padding="20"
                    Effect="{StaticResource DropShadowEffect}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" 
                               Text="Sites Overview" 
                               FontSize="18" 
                               FontWeight="SemiBold" 
                               Margin="0,0,0,15"/>

                    <DataGrid Grid.Row="1"
                              ItemsSource="{Binding Sites}"
                              SelectedItem="{Binding SelectedSite}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              SelectionMode="Single"
                              AlternatingRowBackground="#f8f9fa">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Site Name" Binding="{Binding Description}" Width="*"/>
                            <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="80"/>
                            <DataGridTextColumn Header="Equipment Count" 
                                                Binding="{Binding RegisteredEquipments.Count}" Width="120"/>
                            <DataGridTextColumn Header="Working Equipment" Width="140"
                                                Binding="{Binding WorkingEquipmentCount}"/>
                            <DataGridTextColumn Header="Owner" Binding="{Binding User.FullName}" Width="150"/>
                        </DataGrid.Columns>
                    </DataGrid>

                    <Button Grid.Row="2" 
                            Content="Manage Equipment for Selected Site" 
                            Command="{Binding ManageEquipmentCommand}"
                            Style="{StaticResource PrimaryButtonStyle}"
                            HorizontalAlignment="Center"
                            Margin="0,15,0,0"/>
                </Grid>
            </Border>

            <!-- Unassigned Equipment -->
            <Border Grid.Row="2" 
                    Background="White" 
                    CornerRadius="8" 
                    Padding="20"
                    Effect="{StaticResource DropShadowEffect}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Grid.Row="0" 
                                Orientation="Horizontal" 
                                Margin="0,0,0,15">
                        <TextBlock Text="Unassigned Equipment" 
                                   FontSize="18" 
                                   FontWeight="SemiBold" 
                                   VerticalAlignment="Center"/>
                        <TextBlock Text="{Binding UnassignedEquipment.Count, StringFormat='({0} items)'}" 
                                   FontSize="14" 
                                   Foreground="#dc3545"
                                   FontWeight="SemiBold"
                                   VerticalAlignment="Center"
                                   Margin="10,0,0,0"/>
                    </StackPanel>

                    <DataGrid Grid.Row="1"
                              ItemsSource="{Binding UnassignedEquipment}"
                              SelectedItem="{Binding SelectedUnassignedEquipment}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              CanUserDeleteRows="False"
                              IsReadOnly="True"
                              GridLinesVisibility="Horizontal"
                              HeadersVisibility="Column"
                              SelectionMode="Single"
                              AlternatingRowBackground="#fff3cd">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Equipment" Binding="{Binding Description}" Width="*"/>
                            <DataGridTextColumn Header="Serial Number" Binding="{Binding SerialNumber}" Width="150"/>
                            <DataGridTextColumn Header="Condition" Binding="{Binding Condition}" Width="100"/>
                            <DataGridTextColumn Header="Owner" Binding="{Binding User.FullName}" Width="150"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Border>
        </Grid>
 
        <!-- Summary Statistics -->
        <!--<Border Grid.Row="2" 
          Background="#f8f9fa" 
          CornerRadius="4" 
          Padding="15" 
          Margin="0,20,0,0"
          BorderBrush="#dee2e6"
          BorderThickness="1">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                <TextBlock>
              <Run Text="📊 Summary: " FontWeight="SemiBold"/>
                </TextBlock>
                <TextBlock>
              <Run Text="{Binding TotalSites}"/>
              <Run Text=" Sites" />
                </TextBlock>
                <TextBlock Margin="0,0,20,0">
              <Run Text="{Binding TotalEquipment}"/>
              <Run Text=" Equipment"/>
                </TextBlock>
                <TextBlock Foreground="Green" Margin="0,0,20,0">
              <Run Text="{Binding AssignedEquipment}"/>
              <Run Text=" Assigned"/>
                </TextBlock>
                <TextBlock Foreground="Red">
              <Run Text="{Binding UnassignedEquipment.Count}"/>
              <Run Text=" Unassigned"/>
                </TextBlock>
            </StackPanel>
        </Border>-->
    </Grid>
</UserControl>